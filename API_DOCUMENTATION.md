# Pro-Investor API Documentation

## –û–±–∑–æ—Ä

API –¥–ª—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã PRO-INVESTOR, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ Express.js –∏ PostgreSQL. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Å—á–µ—Ç–∞–º–∏, –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏.

## üÜï –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞–º–∏
- **–ù–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤**: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª–Ω–æ–π –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—á–µ—Ç–æ–≤
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è**: `bank`, `bik_or_bankname`, `currency`
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è**: `number`, `bankname`, `inn`, `kpp`, `corp_bank_account`
- **–û–±—â–∞—è —Å—É–º–º–∞ —Å—Ä–µ–¥—Å—Ç–≤**: –≤ –æ—Ç–≤–µ—Ç–µ GET `/api/accounts` –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `totalBalance`
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: —Å—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ò–ù–ù (10/12 —Ü–∏—Ñ—Ä) –∏ –ö–ü–ü (9 —Ü–∏—Ñ—Ä)
- **–ì–∏–±–∫–æ—Å—Ç—å**: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è —Å—á–µ—Ç–æ–≤ –∫–∞–∫ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏, —Ç–∞–∫ –∏ —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## –ë–∞–∑–æ–≤—ã–π URL

```
http://localhost:5000/api
```

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
```
Authorization: Bearer <your-jwt-token>
```

## Endpoints

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/api/auth`)

#### POST `/register`
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "email": "user@example.com",
  "password": "SecurePass123",
  "firstName": "–ò–≤–∞–Ω",
  "lastName": "–ò–≤–∞–Ω–æ–≤",
  "middleName": "–ò–≤–∞–Ω–æ–≤–∏—á",
  "phone": "+79002003910"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "User registered successfully",
  "user": {
    "id": 1,
    "email": "user@example.com",
    "firstName": "–ò–≤–∞–Ω",
    "lastName": "–ò–≤–∞–Ω–æ–≤",
    "middleName": "–ò–≤–∞–Ω–æ–≤–∏—á"
  },
  "token": "jwt-token"
}
```

#### POST `/login`
–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "email": "user@example.com",
  "password": "SecurePass123",
  "smsCode": 1353,
  "phone": "+79003002030"
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–æ –ª–∏–±–æ email, –ª–∏–±–æ phone. –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ø–æ—Å–æ–±–∞ –≤—Ö–æ–¥–∞.
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–æ –ª–∏–±–æ password, –ª–∏–±–æ smsCode. –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ø–æ—Å–æ–±–∞ –≤—Ö–æ–¥–∞.


#### POST `/logout`
–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã. –¢—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

#### GET `/verify`
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞. –¢—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

### üë§ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`/api/profile`)

–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

#### GET `/`
–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–û—Ç–≤–µ—Ç:**
```json
{
  "user": {
    "id": 1,
    "email": "user@example.com",
    "firstName": "–ò–≤–∞–Ω",
    "lastName": "–ò–≤–∞–Ω–æ–≤",
    "middleName": "–ò–≤–∞–Ω–æ–≤–∏—á",
    "phone": "+7 (999) 123-45-67",
    "isActive": true,
    "isVerified": false,
    "createdAt": "2024-01-01T00:00:00.000Z",
    "updatedAt": "2024-01-01T00:00:00.000Z"
  },
  "passport": {
    "series": "1234",
    "number": "567890",
    "issuedBy": "–û–£–§–ú–° –†–æ—Å—Å–∏–∏ –ø–æ –≥. –ú–æ—Å–∫–≤–µ",
    "issueDate": "2020-01-15",
    "departmentCode": "123456",
    "gender": "male",
    "birthDate": "1990-05-20"
  },
  "documents": [],
  "accounts": []
}
```

#### PUT `/`
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "firstName": "–ò–≤–∞–Ω",
  "lastName": "–ò–≤–∞–Ω–æ–≤",
  "middleName": "–ò–≤–∞–Ω–æ–≤–∏—á",
  "phone": "+7 (999) 123-45-67"
}
```

#### PUT `/passport`
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "series": "1234",
  "number": "567890",
  "issuedBy": "–û–£–§–ú–° –†–æ—Å—Å–∏–∏ –ø–æ –≥. –ú–æ—Å–∫–≤–µ",
  "issueDate": "2020-01-15",
  "departmentCode": "123456",
  "gender": "male",
  "birthDate": "1990-05-20"
}
```

#### POST `/documents`
–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "documentType": "passport",
  "fileName": "passport.pdf",
  "filePath": "/uploads/passport.pdf",
  "fileSize": 1024000,
  "mimeType": "application/pdf"
}
```

#### GET `/documents`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

#### DELETE `/documents/:documentId`
–£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

### üí∞ –°—á–µ—Ç–∞ (`/api/accounts`)

–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

#### GET `/`
–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –æ–±—â–µ–π —Å—É–º–º–æ–π —Å—Ä–µ–¥—Å—Ç–≤.

**–û—Ç–≤–µ—Ç:**
```json
{
  "accounts": [
    {
      "id": 1,
      "account_number": "PI00000001",
      "balance": "100000.00",
      "currency": "RUB",
      "is_active": true,
      "created_at": "2024-01-01T00:00:00.000Z",
      "updated_at": "2024-01-01T00:00:00.000Z",
      "bank": "–°–±–µ—Ä–±–∞–Ω–∫ –†–æ—Å—Å–∏–∏",
      "bik_or_bankname": "044525225",
      "number": "40817810123456789012",
      "bankname": "–°–±–µ—Ä–±–∞–Ω–∫ (–ü–ê–û)",
      "inn": "7707083893",
      "kpp": "770701001",
      "corp_bank_account": "40702810123456789012"
    }
  ],
  "totalBalance": 150000.00
}
```

**–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π:**
- `totalBalance` - –æ–±—â–∞—è —Å—É–º–º–∞ —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ –≤—Å–µ–º –∞–∫—Ç–∏–≤–Ω—ã–º —Å—á–µ—Ç–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `bank` - –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- `bik_or_bankname` - –ë–ò–ö –±–∞–Ω–∫–∞ –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- `number` - –Ω–æ–º–µ—Ä –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã –∏–ª–∏ —Å—á–µ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
- `bankname` - –ø–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
- `inn` - –ò–ù–ù –±–∞–Ω–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ, 10 –∏–ª–∏ 12 —Ü–∏—Ñ—Ä)
- `kpp` - –ö–ü–ü –±–∞–Ω–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ, 9 —Ü–∏—Ñ—Ä)
- `corp_bank_account` - –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –±–∞–Ω–∫–æ–≤—Å–∫–∏–π —Å—á–µ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)

#### GET `/stats`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Å—á–µ—Ç–∞–º.

**–û—Ç–≤–µ—Ç:**
```json
{
  "totalBalance": 150000,
  "accountsCount": 2,
  "operations": {
    "total": 5,
    "deposits": 200000,
    "withdrawals": 50000
  },
  "profitability": {
    "annual": 12.5,
    "monthly": 1.04
  }
}
```

#### POST `/`
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—á–µ—Ç–∞ —Å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "bank": "–°–±–µ—Ä–±–∞–Ω–∫ –†–æ—Å—Å–∏–∏",
  "bik_or_bankname": "044525225",
  "currency": "RUB",
  "number": "40817810123456789012",
  "bankname": "–°–±–µ—Ä–±–∞–Ω–∫ (–ü–ê–û)",
  "inn": "7707083893",
  "kpp": "770701001",
  "corp_bank_account": "40702810123456789012"
}
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:**
- `bank` (string) - –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞
- `bik_or_bankname` (string) - –ë–ò–ö –±–∞–Ω–∫–∞ –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞
- `currency` (string) - –≤–∞–ª—é—Ç–∞ —Å—á–µ—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "RUB")

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è:**
- `number` (string) - –Ω–æ–º–µ—Ä –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã –∏–ª–∏ —Å—á–µ—Ç–∞
- `bankname` (string) - –ø–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞
- `inn` (string) - –ò–ù–ù –±–∞–Ω–∫–∞ (10 –∏–ª–∏ 12 —Ü–∏—Ñ—Ä)
- `kpp` (string) - –ö–ü–ü –±–∞–Ω–∫–∞ (9 —Ü–∏—Ñ—Ä)
- `corp_bank_account` (string) - –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –±–∞–Ω–∫–æ–≤—Å–∫–∏–π —Å—á–µ—Ç

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "Account created successfully",
  "account": {
    "id": 2,
    "account_number": "PI00000002",
    "balance": "0.00",
    "currency": "RUB",
    "is_active": true,
    "created_at": "2024-01-01T00:00:00.000Z",
    "bank": "–°–±–µ—Ä–±–∞–Ω–∫ –†–æ—Å—Å–∏–∏",
    "bik_or_bankname": "044525225",
    "number": "40817810123456789012",
    "bankname": "–°–±–µ—Ä–±–∞–Ω–∫ (–ü–ê–û)",
    "inn": "7707083893",
    "kpp": "770701001",
    "corp_bank_account": "40702810123456789012"
  }
}
```

#### GET `/:accountId`
–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—á–µ—Ç–∞ —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏.

**–û—Ç–≤–µ—Ç:**
```json
{
  "account": {
    "id": 1,
    "account_number": "PI00000001",
    "balance": "100000.00",
    "currency": "RUB",
    "is_active": true,
    "created_at": "2024-01-01T00:00:00.000Z",
    "updated_at": "2024-01-01T00:00:00.000Z",
    "bank": "–°–±–µ—Ä–±–∞–Ω–∫ –†–æ—Å—Å–∏–∏",
    "bik_or_bankname": "044525225",
    "number": "40817810123456789012",
    "bankname": "–°–±–µ—Ä–±–∞–Ω–∫ (–ü–ê–û)",
    "inn": "7707083893",
    "kpp": "770701001",
    "corp_bank_account": "40702810123456789012"
  }
}
```

### üí∏ –û–ø–µ—Ä–∞—Ü–∏–∏ (`/api/operations`)

–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

#### POST `/deposit`
–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "amount": 50000,
  "comment": "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞",
  "contactMethod": "email"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "Deposit request created successfully",
  "operation": {
    "id": 1,
    "type": "deposit",
    "amount": "50000.00",
    "status": "created",
    "comment": "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞",
    "contactMethod": "email",
    "createdAt": "2024-01-01T00:00:00.000Z"
  }
}
```

#### POST `/withdrawal`
–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "amount": 10000,
  "recipientDetails": {
    "bankName": "–°–±–µ—Ä–±–∞–Ω–∫",
    "accountNumber": "40817810123456789012",
    "bik": "044525225"
  },
  "comment": "–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤"
}
```

#### GET `/`
–ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- `status` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (created, processing, completed, rejected)
- `type` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É (deposit, withdrawal)

**–û—Ç–≤–µ—Ç:**
```json
{
  "operations": [...],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 25,
    "pages": 3
  }
}
```

#### GET `/:operationId`
–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.

### üë®‚Äçüíº –ê–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (`/api/admin`)

–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –∞–¥–º–∏–Ω—Å–∫–∏—Ö –ø—Ä–∞–≤.

#### GET `/operations`
–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- `status` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `type` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É
- `userId` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

#### PUT `/operations/:operationId/status`
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "status": "completed",
  "adminComment": "–û–ø–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
}
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã:**
- `created` - —Å–æ–∑–¥–∞–Ω–∞
- `processing` - –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ
- `completed` - –∏—Å–ø–æ–ª–Ω–µ–Ω–∞
- `rejected` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞

#### GET `/stats`
–ü–æ–ª—É—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

**–û—Ç–≤–µ—Ç:**
```json
{
  "operations": {
    "total_operations": 100,
    "pending_operations": 5,
    "processing_operations": 3,
    "completed_operations": 90,
    "rejected_operations": 2,
    "total_deposits": "5000000.00",
    "total_withdrawals": "2000000.00"
  },
  "users": {
    "total_users": 50,
    "active_users": 48,
    "new_users_30_days": 10
  },
  "accounts": {
    "total_accounts": 50,
    "total_balance": "3000000.00",
    "avg_balance": "60000.00"
  },
  "recentOperations": [...]
}
```

#### GET `/users`
–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- `search` - –ø–æ–∏—Å–∫ –ø–æ email, –∏–º–µ–Ω–∏ –∏–ª–∏ —Ñ–∞–º–∏–ª–∏–∏

#### PUT `/users/:userId/status`
–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "isActive": false
}
```

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

- `400` - –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏)
- `401` - –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- `403` - –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
- `404` - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

## –í–∞–ª–∏–¥–∞—Ü–∏—è

### –ü–∞—Ä–æ–ª—å
- –ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤
- –î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º –æ–¥–Ω—É –∑–∞–≥–ª–∞–≤–Ω—É—é –±—É–∫–≤—É, –æ–¥–Ω—É —Å—Ç—Ä–æ—á–Ω—É—é –±—É–∫–≤—É –∏ –æ–¥–Ω—É —Ü–∏—Ñ—Ä—É

### Email
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º email –∞–¥—Ä–µ—Å–æ–º

### –¢–µ–ª–µ—Ñ–æ–Ω
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º —Ä–æ—Å—Å–∏–π—Å–∫–∏–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞

### –°—É–º–º–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
- –ú–∏–Ω–∏–º—É–º 1000 RUB –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –≤—ã–≤–æ–¥–∞

### –°—á–µ—Ç–∞ (–Ω–æ–≤—ã–µ –ø–æ–ª—è)
- `bank` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, –Ω–µ–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
- `bik_or_bankname` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, –Ω–µ–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
- `currency` - —Å—Ç—Ä–æ–∫–∞, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "RUB"
- `number` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ, –º–∞–∫—Å–∏–º—É–º 255 —Å–∏–º–≤–æ–ª–æ–≤
- `bankname` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ, –º–∞–∫—Å–∏–º—É–º 255 —Å–∏–º–≤–æ–ª–æ–≤
- `inn` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ, –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å 10 –∏–ª–∏ 12 —Ü–∏—Ñ—Ä
- `kpp` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ, –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–æ–≤–Ω–æ 9 —Ü–∏—Ñ—Ä
- `corp_bank_account` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ, –º–∞–∫—Å–∏–º—É–º 255 —Å–∏–º–≤–æ–ª–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã –≤–∞–ª–∏–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:**
```json
{
  "inn": "7707083893",        // 10 —Ü–∏—Ñ—Ä –¥–ª—è –ò–ü
  "inn": "770708389301",      // 12 —Ü–∏—Ñ—Ä –¥–ª—è –û–û–û
  "kpp": "770701001"          // 9 —Ü–∏—Ñ—Ä
}
```

## Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—é
- –ò–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É)

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `user_passports` - –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `user_documents` - –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `user_accounts` - —Å—á–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `operations` - –æ–ø–µ—Ä–∞—Ü–∏–∏
- `operation_history` - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ–ø–µ—Ä–∞—Ü–∏–π
- `password_reset_tokens` - —Ç–æ–∫–µ–Ω—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
- `user_sessions` - —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –¢–∞–±–ª–∏—Ü–∞ `user_accounts` (–æ–±–Ω–æ–≤–ª–µ–Ω–∞):
```sql
CREATE TABLE user_accounts (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  account_number VARCHAR(50) UNIQUE NOT NULL,
  balance DECIMAL(15,2) DEFAULT 0.00,
  currency VARCHAR(10) DEFAULT 'RUB',
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  
  -- –ù–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
  bank VARCHAR(255) NOT NULL,                    -- –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
  bik_or_bankname VARCHAR(255) NOT NULL,         -- –ë–ò–ö –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
  number VARCHAR(255),                           -- –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã/—Å—á–µ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
  bankname VARCHAR(255),                         -- –ü–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
  inn VARCHAR(20),                               -- –ò–ù–ù –±–∞–Ω–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
  kpp VARCHAR(20),                               -- –ö–ü–ü –±–∞–Ω–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
  corp_bank_account VARCHAR(255)                 -- –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å—á–µ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
);
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å—á–µ—Ç–æ–≤

### –°–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```bash
curl -X POST http://localhost:5000/api/accounts \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "bank": "–°–±–µ—Ä–±–∞–Ω–∫ –†–æ—Å—Å–∏–∏",
    "bik_or_bankname": "044525225",
    "currency": "RUB"
  }'
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–∞ —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏
```bash
curl -X POST http://localhost:5000/api/accounts \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "bank": "–í–¢–ë",
    "bik_or_bankname": "044525187",
    "currency": "USD",
    "number": "40817810123456789012",
    "bankname": "–í–¢–ë (–ü–ê–û)",
    "inn": "7702070139",
    "kpp": "770201001",
    "corp_bank_account": "40702810123456789012"
  }'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤ —Å –æ–±—â–µ–π —Å—É–º–º–æ–π
```bash
curl -X GET http://localhost:5000/api/accounts \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "accounts": [
    {
      "id": 1,
      "account_number": "PI00000001",
      "balance": "100000.00",
      "currency": "RUB",
      "bank": "–°–±–µ—Ä–±–∞–Ω–∫ –†–æ—Å—Å–∏–∏",
      "bik_or_bankname": "044525225"
    },
    {
      "id": 2,
      "account_number": "PI00000002", 
      "balance": "50000.00",
      "currency": "USD",
      "bank": "–í–¢–ë",
      "bik_or_bankname": "044525187"
    }
  ],
  "totalBalance": 150000.00
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```bash
# –ù–µ–≤–µ—Ä–Ω—ã–π –ò–ù–ù
curl -X POST http://localhost:5000/api/accounts \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "bank": "–¢–µ—Å—Ç –ë–∞–Ω–∫",
    "bik_or_bankname": "123456789",
    "inn": "123"
  }'
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ:**
```json
{
  "message": "Validation failed",
  "errors": [
    "INN must be 10 or 12 digits"
  ]
}
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π —Å –ø–æ–º–æ—â—å—é bcrypt
- Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç DDoS
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- Helmet –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤